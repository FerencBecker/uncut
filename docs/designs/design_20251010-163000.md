# VÁGATLANUL - Design Specification
**Version:** 20251012-075605
**Project:** Historical Photography Map Application
**Client:** Museum of Ethnography (Néprajzi Múzeum)

---

## Table of Contents
1. [Overview](#overview)
2. [Design Philosophy](#design-philosophy)
3. [Color Palettes](#color-palettes)
4. [Typography](#typography)
5. [Spacing & Layout](#spacing--layout)
6. [Component Library](#component-library)
7. [Page Specifications](#page-specifications)
8. [Theme System](#theme-system)
9. [State Management](#state-management)
10. [Accessibility](#accessibility)
11. [Responsive Design](#responsive-design)

---

## Overview

This design specification documents the visual design system for VÁGATLANUL, a dual-platform application showcasing historical Hungarian photography studios through an interactive map interface.

### Platforms
- **Kiosk Application** (Phase 1): Touchscreen exhibition interface for museum installation
- **Web Application** (Phase 2): Responsive online platform with CMS

### Design Goals
- Clean, professional museum aesthetic
- High contrast for readability
- Touch-optimized interface (44px minimum targets, 64px for 55" displays)
- Cultural sensitivity and institutional credibility
- Accessibility compliance (WCAG 2.1 AA)

---

## Design Philosophy

### Museum-First Approach
The design prioritizes a clean, contemporary museum aesthetic over vintage or nostalgic themes. While the application showcases historical photography, the interface itself is modern and professional.

### Key Principles
1. **Clarity over decoration**: Clean interfaces with high contrast
2. **Cultural respect**: Professional presentation suitable for diverse audiences
3. **Touch-first**: All interactive elements sized for reliable touch interaction
4. **Consistent theming**: Unified color palette across all platforms

### Theme Evolution
- **Original Heritage Theme**: Warm sepia tones, vintage aesthetic (deprecated)
- **Current Museum Theme**: Clean whites, grays, charcoal with subtle warm accents
- **Rationale**: The sepia/brown color scheme was removed to create a more contemporary, professional appearance that better represents modern museum standards

---

## Color Palettes

### Web Application - Light Museum Theme
**File:** `web-light-theme.css`

#### Core Colors
```css
--museum-primary: #2B2B2B        /* Deep charcoal - headers, primary text */
--museum-secondary: #6B6B6B      /* Medium gray - body text */
--museum-accent: #8B7355         /* Warm brown accent (subtle only) */
--museum-accent-light: #C4A882   /* Light warm tone */
```

#### Backgrounds
```css
--bg-primary: #FFFFFF            /* Pure white */
--bg-secondary: #F8F8F8          /* Very light gray */
--bg-tertiary: #F0F0F0           /* Light gray for contrast */
```

#### Text Colors
```css
--text-primary: #2B2B2B          /* Main text */
--text-secondary: #6B6B6B        /* Secondary text */
--text-muted: #999999            /* Captions, hints */
```

#### Borders
```css
--border-light: #E5E5E5          /* Light borders */
--border-medium: #D0D0D0         /* Medium borders */
--border-dark: #B0B0B0           /* Emphasis borders */
```

#### Status Colors (Muted & Professional)
```css
--success: #2F855A               /* Muted green */
--warning: #C05621               /* Muted orange */
--error: #9B2C2C                 /* Muted red */
--info: #2C5282                  /* Muted blue */
```

#### Interactive Elements
```css
--link-color: #4A5568            /* Professional link color */
--link-hover: #2D3748            /* Darker on hover */
--focus-ring: rgba(139, 115, 85, 0.4)  /* Warm brown focus ring */
```

### CMS Application - Clean Museum Theme
**File:** `cms-styles.css`

The CMS now uses the same clean museum palette, mapping legacy variable names to modern colors:

```css
/* Legacy variables mapped to clean colors */
--sepia-brown: var(--museum-primary, #2B2B2B)
--sepia-gold: var(--museum-accent, #8B7355)
--light-sepia-wash: var(--bg-tertiary, #F0F0F0)
--medium-sepia-tone: var(--border-medium, #D0D0D0)
--text-sepia-charcoal: var(--text-primary, #2B2B2B)
--error-sepia-red: var(--error, #9B2C2C)
```

**Button Styles:**
- **Primary**: Dark charcoal (#2B2B2B) background, white text
- **Secondary**: Transparent background, charcoal text, gray border
- **Tertiary**: Transparent background, charcoal text, charcoal border

### Kiosk Application - Dual Theme System
**File:** `styles.css`

#### Static Colors (Theme-Independent)
```css
--primary-deep-blue: #1B365D     /* Museum deep blue */
--secondary-warm-gold: #D4A574   /* Warm gold accent */
--neutral-charcoal: #2D3748      /* Neutral text */
--background-cream: #FEFCF7      /* Cream background */
--success-green: #38A169
--warning-amber: #D69E2E
--error-burgundy: #C53030
```

#### Light Theme (Default)
```css
--bg-color: #FEFCF7              /* Cream background */
--surface-color: #FFFFFF         /* White surfaces */
--surface-secondary: #F5F3EC     /* Light beige */
--text-color: #2D3748            /* Dark text */
--text-secondary: #718096        /* Gray text */
--heritage-gold: #D4AF74         /* Gold accent */
--museum-deep-blue: #1B365D      /* Deep blue */
--border-color: #E2E8F0          /* Light borders */
```

#### Dark Theme
```css
--bg-color: #1A1A1A              /* Dark background */
--surface-color: #2C2C2C         /* Dark surfaces */
--surface-secondary: #3A3A3A     /* Medium dark */
--text-color: #E8E8E8            /* Light text */
--text-secondary: #A0AEC0        /* Gray text */
--heritage-gold: #D4AF74         /* Gold accent (unchanged) */
--museum-deep-blue: #2B4A7C      /* Lighter blue for dark mode */
--border-color: #4A5568          /* Dark borders */
```

---

## Typography

### Web Application
**Font Stack:**
```css
--font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',
                'Helvetica Neue', Arial, sans-serif
--font-serif: Georgia, 'Times New Roman', serif
--font-mono: 'Courier New', Courier, monospace
```

**Type Scale:**
- Display (H1): 2.5rem / 40px (letter-spacing: -0.02em)
- Section (H2): 2rem / 32px (letter-spacing: -0.01em)
- Subsection (H3): 1.5rem / 24px
- Content (H4): 1.25rem / 20px
- Body Large: 1rem / 16px (line-height: 1.6)
- Body Regular: 0.875rem / 14px (line-height: 1.6)
- Caption: 0.875rem / 14px (color: muted)

### Kiosk Application
**Font Stack:**
```css
--font-header: 'Playfair Display', Georgia, serif
--font-body: 'Source Sans Pro', -apple-system, sans-serif
--font-ui: 'Inter', -apple-system, sans-serif
```

**Type Scale (Standard):**
- Display Large: 3.5rem / 56px (weight: 700, line-height: 1.2)
- Display Medium: 2.5rem / 40px (weight: 600, line-height: 1.3)
- Heading 1: 2rem / 32px (weight: 600)
- Heading 2: 1.5rem / 24px (weight: 600)
- Body Large: 1.125rem / 18px
- Body Medium: 1rem / 16px
- Caption: 0.875rem / 14px

**Type Scale (55-inch displays - 1.25x multiplier):**
All font sizes are multiplied by 1.25 for 55-inch touchscreen displays (≥3840px width).

---

## Spacing & Layout

### Spacing Scale
```css
--space-xs: 0.25rem    /* 4px */
--space-sm: 0.5rem     /* 8px */
--space-md: 1rem       /* 16px */
--space-lg: 1.5rem     /* 24px */
--space-xl: 2rem       /* 32px */
--space-2xl: 3rem      /* 48px */
--space-3xl: 4rem      /* 64px */
```

### Border Radius
```css
--radius-sm: 4px
--radius-md: 8px
--radius-lg: 12px
```

### Shadows
**Web (Subtle & Refined):**
```css
--shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08)
--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07)
--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.06)
--shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.05)
```

**CMS:**
```css
--shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1)
--shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.15)
```

### Touch Targets
```css
--touch-min: 44px          /* Minimum for standard devices */
--touch-kiosk: 55px        /* 1.25x for kiosk standard screens */
--touch-large: 64px        /* For 55-inch museum displays */
```

### Transitions
```css
--transition-fast: 0.15s ease
--transition-base: 0.2s ease
--transition-slow: 0.3s ease
```

---

## Component Library

### Buttons

#### Web Application
**Primary Button:**
- Background: `--museum-primary` (#2B2B2B)
- Text: white
- Hover: #1a1a1a background, translateY(-1px), shadow-md
- Border radius: 8px
- Padding: 0.5rem 1.5rem
- Min height: 44px

**Secondary Button:**
- Background: transparent
- Text: `--museum-primary`
- Border: 1px solid `--border-dark`
- Hover: `--bg-secondary` background, `--museum-primary` border

**Accent Button:**
- Background: `--museum-accent` (#8B7355)
- Text: white
- Hover: #7a6449, translateY(-1px), shadow-md

#### CMS Application
**Primary Button:**
- Background: `--museum-primary` (#2B2B2B)
- Text: white
- Border: 1px solid `--museum-primary`
- Hover: #1a1a1a, translateY(-1px)

**Secondary Button:**
- Background: transparent
- Text: `--museum-primary`
- Border: 1px solid `--border-dark`
- Hover: `--bg-secondary`, `--museum-primary` border

**Tertiary Button:**
- Background: transparent
- Text: `--museum-primary`
- Border: 1px solid `--museum-primary`
- Hover: `--museum-primary` background, white text

### Cards
**Web:**
- Background: `--bg-primary`
- Border: 1px solid `--border-light`
- Border radius: 12px
- Padding: 2rem
- Shadow: `--shadow-sm`
- Hover: `--shadow-md`, `--border-medium`

**CMS:**
- Background: `--clean-white`
- Border radius: 12px
- Padding: variable
- Shadow: `--shadow-sm`

### Forms

#### Input Fields
**Web:**
- Border: 1px solid `--border-medium`
- Border radius: 8px
- Padding: 0.5rem 1rem
- Focus: `--museum-accent` border, `--focus-ring` box-shadow
- Font size: 1rem

**CMS:**
- Border: 1px solid `--border-medium` (#D0D0D0)
- Border radius: 8px
- Padding: 0.5rem 1rem
- Focus: `--museum-accent` border, focus ring with rgba(139, 115, 85, 0.4)
- Background: white

#### Labels
- Font weight: 500-600
- Color: `--text-primary`
- Font size: 0.875rem
- Margin bottom: 0.5rem
- Required indicator: Red asterisk

#### Hints
- Font size: 0.875rem
- Color: `--text-muted`
- Margin top: 0.25rem

### Status Badges

**Web:**
```css
.status-published {
  color: var(--success);
  background-color: rgba(47, 133, 90, 0.1);
  border: 1px solid rgba(47, 133, 90, 0.3);
}

.status-draft {
  color: var(--warning);
  background-color: rgba(192, 86, 33, 0.1);
  border: 1px solid rgba(192, 86, 33, 0.3);
}

.status-pending {
  color: var(--info);
  background-color: rgba(44, 82, 130, 0.1);
  border: 1px solid rgba(44, 82, 130, 0.3);
}
```

### Chips/Tags
**Web:**
- Background: `--bg-tertiary` (#F0F0F0)
- Border: 1px solid `--border-light`
- Border radius: 16px
- Padding: 0.25rem 1rem
- Font size: 0.875rem
- Font weight: 500
- Color: `--text-primary`

### Navigation

**CMS Sidebar Navigation:**
- Background: Linear gradient (135deg, `--museum-primary`, #1a1a1a)
- Color: white
- Nav item padding: `--space-md`
- Nav item hover: rgba(255, 255, 255, 0.1)
- Nav item active: rgba(255, 255, 255, 0.15), bold

---

## Page Specifications

### Web Application Pages

#### W01 - Landing Page
**Purpose:** Main entry point for web application
**Key Features:**
- Hero section with project title
- Search interface
- Featured studios or collections
- Call-to-action buttons

**Color Usage:**
- Background: `--bg-primary` (white)
- Headers: `--museum-primary` (charcoal)
- Accents: `--museum-accent` (warm brown)

---

#### W02 - Interactive Map (Web)
**Purpose:** Zoomable map showing all 70-80 studios
**Key Features:**
- Full-screen zoomable map interface
- Three-layer map data:
  - Studio locations
  - Photo locations
  - Catchment areas (migration patterns)
- Filter sidebar
- Search bar in header
- Language toggle (🇬🇧 English / 🇭🇺 Magyar)

**Layout:**
- Header: White background, sticky position
- Sidebar: 320px width, white background
- Map canvas: Flex-fill, light beige background

**Interactive Elements:**
- Studio markers: Clickable, hover effects
- Zoom controls: Bottom-right position
- Layer toggles: Top-right panel

---

#### W03 - Search Results
**Purpose:** Display filtered search results
**Key Features:**
- Results header with count
- Active filter tags (removable)
- Grid view / List view toggle
- Sort controls (relevance, date, studio name)
- Pagination
- "Map view" button to switch to W02

**Layout:**
- Sticky header with search bar
- Filter tags below header
- Results grid: `repeat(auto-fill, minmax(300px, 1fr))`
- Result cards: 4:3 aspect ratio images

**Colors:**
- Background: `--bg-secondary` (#F8F8F8)
- Cards: white with `--shadow-sm`
- Filter tags: `--museum-primary` background, white text

---

#### W04 - Advanced Search
**Purpose:** Detailed filtering interface
**Key Features:**
- Multiple filter categories:
  - Year range
  - Location
  - Photo type (portrait/group/studio/outdoor)
  - Photographer gender
  - Event type
- Search button
- Clear filters button

**Form Layout:**
- Two-column grid on desktop
- Single column on mobile
- Form groups with clear labels
- Range inputs for years

---

#### W05 - Studio Detail
**Purpose:** Comprehensive studio information
**Key Features:**
- Studio name and location
- Historical description
- Operational years
- Photographer information
- Image gallery preview
- Link to full gallery
- Map showing studio location

**Layout:**
- Hero section with studio name
- Two-column layout: Info + sidebar
- Gallery grid at bottom
- Related studios section

---

#### W06 - Image Detail
**Purpose:** Full-screen image viewer with metadata
**Key Features:**
- Large image display with zoom
- Metadata panel:
  - Title (Hungarian/English)
  - Date and uncertainty
  - Studio attribution
  - Technical details
  - Subject matter
- Navigation arrows (previous/next)
- Back to gallery button
- Social sharing buttons
- Contact form link (pre-filled with image context)

**Layout:**
- Split view: Image (60%) | Metadata (40%)
- Mobile: Stacked vertically

---

#### W08 - Contact Form
**Purpose:** User inquiry submission
**Key Features:**
- Name, email, subject fields
- Message textarea
- Image reference (if navigating from W06)
- GDPR consent checkbox
- Submit button

**Validation:**
- Required field indicators
- Email format validation
- Character limits

---

#### W09 - About Project
**Purpose:** Project information and credits
**Key Features:**
- Project description
- Museum of Ethnography information
- Historical context
- MuseumPlus integration details
- Credits and acknowledgments
- Contact information

**Layout:**
- Single column, centered content
- Max width: 800px
- Rich text with headers, paragraphs, lists

---

#### W10 - CMS Dashboard
**Purpose:** Content management overview
**Key Features:**
- Summary cards:
  - Total studios
  - Total photos
  - Draft items
  - Pending approval
- Recent activity feed
- Quick action buttons
- Statistics graphs (optional)

**Layout:**
- Grid of summary cards (2x2 or 3x1)
- Activity timeline below
- Sidebar navigation (left)

**Colors:**
- Sidebar: Dark gradient (`--museum-primary` to #1a1a1a)
- Main area: `--bg-tertiary` background
- Cards: White with `--shadow-sm`

---

#### W11 - Studio Editor (CMS)
**Purpose:** Edit studio metadata and content
**Key Features:**
- Studio name (Hungarian/English)
- Location and address
- Historical description (WYSIWYG editor)
- Operational years
- Photographer information
- Image gallery management:
  - Upload images
  - Delete images
  - Reorder sequence (drag-and-drop)
- Preview button
- Save draft
- Publish button
- Undo functionality

**Layout:**
- Three-column: Info preview (sticky) | Form content | Actions sidebar
- Accordion sections:
  - Basic information
  - Historical context
  - Location details
  - Gallery management
  - SEO metadata

**Form Components:**
- Rich text editors (WYSIWYG)
- Image upload with preview
- Date range pickers
- Multi-language input groups

---

#### W12 - Photo Editor (CMS)
**Purpose:** Edit photo metadata
**Key Features:**
- Photo preview (left sidebar, sticky)
- Metadata form (center):
  - Title (Hungarian/English)
  - Description
  - Date and uncertainty
  - Studio association
  - Location (if different from studio)
  - Subject type and count
  - **Catchment area** (multi-select cities) - CRITICAL FIELD
  - Identified people
  - Gender, age group
  - Event type
  - Tags and categories
  - Technical details (technique, format, condition)
  - Rights and source information
- Actions sidebar (right):
  - Publish
  - Request approval
  - Save draft
  - Status indicator
  - Related studio link
  - Batch edit option

**Layout:**
- Three-column grid: 400px | 1fr | 300px
- Accordion sections for organized metadata
- Highlight box for catchment area field

**Special Features:**
- Multi-select dropdown for catchment area with chips
- Form hint explaining catchment area importance
- Thumbnail preview of photo (4:3 aspect ratio)
- File information display (size, resolution, format)

---

### Kiosk Application Pages

#### K01 - Screensaver
**Purpose:** Attract mode when kiosk is idle
**Key Features:**
- Large "VÁGATLANUL" title in gold
- Bilingual subtitle (Hungarian / English)
- Animated Hungary map with pulsing studio markers
- Call-to-action: "Touch screen to begin"
- Auto-navigation to K03 on any touch

**Visual Design:**
- Dark gradient background (#1A1A1A to #2C2C2C)
- Animated radial gradient overlay (rotating)
- Title: 5rem, gold color, text shadow
- Map: SVG with animated markers (sequential appearance)
- Markers pulse with scale animation (0 to 1.3)

**Animations:**
- Background rotation: 30s infinite
- Title pulse: 4s ease-in-out
- Markers: 6s staggered appearance (0.3s delay each)
- CTA blink: 2s opacity fade

**Scaling:**
- 55-inch displays: 1.25x all typography

---

#### K03 - Interactive Map (Kiosk)
**Purpose:** Fixed, non-zoomable map with 21 highlighted studios
**Key Features:**
- Header with "VÁGATLANUL" title
- Theme toggle button (🌙 Dark / ☀️ Light)
- Language toggle button (🇬🇧 English / 🇭🇺 Magyar)
- Fixed Hungary map (non-zoomable)
- 21 studio markers with touch targets (64px)
- Hover tooltips showing studio names
- Click to navigate to K04 studio detail
- Legend showing marker meanings
- Auto-return to K01 after 2 minutes of inactivity

**Layout:**
- Header: Gradient blue background, 1.5rem padding
- Map: Full-screen below header
- Legend: Bottom-left overlay
- Layer toggle: Top-right overlay

**Interactive Elements:**
- Studio markers:
  - Size: 64px diameter
  - Background: Gold gradient
  - Border: 4px white
  - Hover: Scale 1.4, rotate 10deg, blue background
  - Active: Scale 1.5, pulsing ring animation
  - Pulse animation: 3s continuous

**Theme Support:**
- Responds to `data-theme` attribute
- Background changes: Cream → Dark gray
- Surface changes: White → Dark surface
- Text color inverts
- Markers maintain visibility in both themes

---

#### K04 - Studio Info Panel
**Purpose:** Detailed studio information with side panel
**Key Features:**
- Split layout: Map section (left) | Info panel (right, 600px)
- Back to map button (top-left of map section)
- Info panel header:
  - Theme toggle button
  - Language toggle button
  - Close button
  - Studio name and location
- Panel content:
  - Historical description
  - Metadata grid (operational years, photographer, technique, image count)
  - Gallery preview (3x2 grid)
  - "View Gallery" button → K06

**Visual Design:**
- Info panel: White/dark surface, right-side shadow
- Panel header: Blue gradient background, white text
- Control buttons: Circular, 55px, white overlay background
- Metadata cards: Left border accent (gold), secondary background
- Gallery previews: 4:3 aspect ratio, hover scale 1.05

**Theme Support:**
- Panel background responds to theme
- Metadata cards background adapts
- Text colors invert

**Auto-timeout:** 2 minutes → K01

---

#### K06 - Fullscreen Gallery
**Purpose:** Full-screen lightbox image viewer
**Key Features:**
- Main image display (centered, large)
- Thumbnail strip (bottom, scrollable)
- Navigation controls:
  - Previous/Next arrows
  - Close button (× top-right)
  - Theme toggle
  - Image counter (e.g., "3 / 10")
- Image metadata panel (right side, toggleable):
  - Title
  - Date
  - Description
  - Technical details
- Zoom controls (optional)
- Auto-advance option (slideshow mode)

**Layout:**
- Full viewport height
- Top bar: Controls and counter
- Center: Large image (max 80% viewport)
- Bottom: Thumbnail strip (120px height)
- Right panel: Metadata (slide-in, 400px width)

**Interaction:**
- Swipe left/right for next/previous
- Tap thumbnails to jump
- Pinch to zoom (optional)
- Tap outside metadata panel to close it

**Visual Design:**
- Background: Dark overlay (rgba(0, 0, 0, 0.9))
- Thumbnails: 80px x 60px, 3px border when active
- Navigation arrows: Large (1.75rem), circular buttons
- Image counter: Centered, subtle text

**Theme Support:**
- Metadata panel background adapts to theme
- Control buttons adapt to theme

**Auto-timeout:** 2 minutes → K01

---

#### K08 - Session Timeout Warning
**Purpose:** Warn user before auto-logout
**Key Features:**
- Corner modal (bottom-right position)
- 90-second countdown timer
- Progress bar showing remaining time
- Bilingual messaging (Hungarian / English)
- Dismissible by clicking anywhere
- Auto-redirect to K01 after countdown

**Visual Design:**
- Modal: White/dark surface, 400px max width
- Border: 2px gold accent
- Icon: ⏱️ (3rem, pulsing animation)
- Countdown: 3rem, gold color, scale animation
- Progress bar: Gold gradient, 6px height, shrinking animation

**Behavior:**
- Appears after 90 seconds of inactivity on any page
- Countdown from 90 → 0
- Click anywhere to dismiss and reset inactivity timer
- If countdown reaches 0 → redirect to K01

**Animation:**
- Slide in from corner: 0.4s ease-out
- Timer pulse: 1s scale effect
- Progress bar shrink: 90s linear

**Theme Support:**
- Modal background adapts to theme
- Text colors invert

---

## Theme System

### Web Application
**Single Theme:** Light museum theme only
**File:** `web-light-theme.css`
**No theme switching:** Web pages use a consistent light theme

### CMS Application
**Single Theme:** Clean museum theme (light only)
**File:** `cms-styles.css`
**Colors:** Maps legacy sepia variables to clean museum colors
**No theme switching:** CMS maintains consistent light appearance

### Kiosk Application
**Dual Theme:** Light (default) + Dark mode
**File:** `styles.css`
**Switcher:** `theme-switcher.js`

#### Theme Persistence
- Theme preference stored in `localStorage`
- Key: `'theme'` (values: `'light'` or `'dark'`)
- Applied via `data-theme` attribute on `<html>` element
- Persists across page navigation

#### Theme Toggle Button
- Icon: 🌙 (Light mode) / ☀️ (Dark mode)
- Text: "Dark" / "Light"
- Located in header controls
- Circular button, 64px minimum for kiosk
- Updates immediately on click

#### Implementation
```javascript
// theme-switcher.js
function initTheme() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
  updateThemeToggleButton(savedTheme);
}

function toggleTheme() {
  const current = document.documentElement.getAttribute('data-theme') || 'light';
  const newTheme = current === 'light' ? 'dark' : 'light';
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  updateThemeToggleButton(newTheme);
}
```

#### CSS Variable Override
All theme-aware variables are defined twice:
```css
:root,
:root[data-theme="light"] {
  --bg-color: #FEFCF7;
  --text-color: #2D3748;
  /* ... */
}

:root[data-theme="dark"] {
  --bg-color: #1A1A1A;
  --text-color: #E8E8E8;
  /* ... */
}
```

#### Smooth Transitions
All theme-aware properties include transitions:
```css
body {
  transition: background-color 0.3s ease;
}

.surface {
  transition: background-color 0.3s ease, color 0.3s ease;
}
```

---

## State Management

### localStorage Keys

The application uses browser localStorage to persist user preferences across page navigation and sessions:

#### Theme Preference
```javascript
localStorage.getItem('theme')  // Values: 'light' | 'dark'
localStorage.setItem('theme', newTheme)
```
- **Used by:** All kiosk pages (K01, K03, K04, K06, K08)
- **Default:** 'light'
- **Applied via:** `data-theme` attribute on `<html>` element

#### Language Preference
```javascript
localStorage.getItem('selectedLanguage')  // Values: 'hu' | 'en'
localStorage.setItem('selectedLanguage', newLanguage)
```
- **Used by:** All pages with language toggle (K03, K04, K06, W02+)
- **Default:** 'hu' (Hungarian)
- **Toggle behavior:** Button shows OPPOSITE language (when Magyar active, shows "🇬🇧 English")

#### Gallery Position
```javascript
localStorage.getItem('currentPhoto')  // Values: 1-10 (gallery photo index)
localStorage.setItem('currentPhoto', photoIndex)
```
- **Used by:** K06 fullscreen gallery
- **Purpose:** Preserves photo position when navigating away and returning
- **Range:** 1 to total photo count (10 for Máté Lajos)
- **Reset:** On session restart (K01 screensaver)

### Session Flow

1. User touches K01 screensaver → Navigate to K03
2. User sets preferences (theme, language) → Saved to localStorage
3. User navigates through pages (K03 → K04 → K06)
4. All preferences persist across navigation
5. After 2 minutes of inactivity → Return to K01
6. User touches K01 again → Preferences still remembered from localStorage

### Inactivity Timer

All interactive kiosk pages (K03, K04, K06) implement a 2-minute inactivity timer:

```javascript
let inactivityTimer;

function resetInactivityTimer() {
  clearTimeout(inactivityTimer);
  inactivityTimer = setTimeout(() => {
    window.location.href = 'K01-screensaver.html';
  }, 120000); // 2 minutes = 120000ms
}

// Attach to all user interaction events
document.addEventListener('click', resetInactivityTimer);
document.addEventListener('touchstart', resetInactivityTimer);
document.addEventListener('mousemove', resetInactivityTimer);
document.addEventListener('keypress', resetInactivityTimer);
```

**Optional K08 Timeout Warning:**
- Shows 90-second warning modal at 1:30 mark (30 seconds before timeout)
- Click anywhere to dismiss and reset timer
- Auto-redirect to K01 if no interaction during countdown

---

## Accessibility

### WCAG 2.1 AA Compliance
All designs meet WCAG 2.1 AA standards for:
- Color contrast ratios (≥ 4.5:1 for normal text, ≥ 3:1 for large text)
- Touch target sizes (≥ 44px, ≥ 64px for 55" displays)
- Keyboard navigation
- Screen reader compatibility
- Focus indicators

### Color Contrast Examples
**Web Light Theme:**
- `--museum-primary` (#2B2B2B) on white: 15.6:1 ✓
- `--museum-secondary` (#6B6B6B) on white: 5.7:1 ✓
- `--text-muted` (#999999) on white: 2.8:1 (caption/non-essential only)

**Kiosk Dark Theme:**
- `--text-color` (#E8E8E8) on `--bg-color` (#1A1A1A): 13.4:1 ✓
- `--text-secondary` (#A0AEC0) on `--bg-color` (#1A1A1A): 8.2:1 ✓

### Skip Links
All pages include skip-to-content links:
```html
<a href="#main-content" class="skip-link">
  Ugrás a főtartalomhoz / Skip to main content
</a>
```

Styled to appear on focus:
```css
.skip-link {
  position: absolute;
  top: -40px;
  background: var(--museum-primary);
  color: white;
  padding: 0.5rem 1rem;
}

.skip-link:focus {
  top: 0;
}
```

### Focus Indicators
All interactive elements have visible focus states:
```css
:focus {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}
```

### ARIA Labels
All icon-only buttons include `aria-label`:
```html
<button class="close-button" aria-label="Bezárás">×</button>
```

### Alternative Text
All images require descriptive alt text:
```html
<img src="photo.jpg" alt="Családi portré a műteremben, 1895">
```

---

## Responsive Design

### Breakpoints

**Web Application:**
```css
/* Mobile first */
@media (max-width: 768px) {
  /* Mobile styles */
}

@media (max-width: 1024px) {
  /* Tablet styles */
}

@media (max-width: 1400px) {
  /* Small desktop */
}
```

**Kiosk Application:**
```css
/* Standard kiosk screens */
@media (min-width: 3840px) {
  /* 55-inch display scaling (1.25x typography) */
}
```

### Mobile Adaptations (Web)

**Navigation:**
- Hamburger menu on mobile
- Full-width search bar
- Stacked header controls

**Grid Layouts:**
- Results grid: Single column
- Metadata grid: Single column
- Split layouts: Stack vertically

**Typography:**
- Reduce heading sizes by 0.5rem on mobile
- Reduce space-xl/2xl/3xl on mobile

**Touch Targets:**
- All buttons minimum 44px height on mobile
- Increased spacing between interactive elements

### Tablet Adaptations (Web)

**Map Interface:**
- Filter sidebar: Slide-in drawer (toggle button)
- Reduced sidebar width: 280px

**CMS:**
- Three-column layouts become two-column
- Photo editor: Stack preview on top

### Kiosk Display Scaling

**55-inch Displays (≥3840px):**
- All typography × 1.25
- Touch targets: 64px minimum (vs. 44px)
- Increased padding and spacing
- Larger icons and controls

**Implementation:**
```css
@media (min-width: 3840px) {
  .screensaver-title { font-size: 6.25rem; }  /* 5rem × 1.25 */
  .studio-marker { width: 80px; height: 80px; }  /* 64px × 1.25 */
}
```

---

## File Structure

### HTML Pages
```
docs/designs/20251010-163000/
├── K01-screensaver.html
├── K03-interactive-map.html
├── K04-studio-info-panel.html
├── K06-fullscreen-gallery.html
├── K08-session-timeout.html
├── W01-landing-page.html
├── W02-interactive-map.html
├── W03-search-results.html
├── W04-advanced-search.html
├── W05-studio-detail.html
├── W06-image-detail.html
├── W08-contact-form.html
├── W09-about-project.html
├── W10-cms-dashboard.html
├── W11-studio-editor.html
└── W12-photo-editor.html
```

### Stylesheets
```
docs/designs/20251010-163000/
├── styles.css                # Kiosk dual-theme system
├── web-light-theme.css       # Web light museum theme
└── cms-styles.css            # CMS clean museum theme
```

### Scripts
```
docs/designs/20251010-163000/
└── theme-switcher.js         # Kiosk theme toggle logic
```

---

## Design Tokens Summary

### Color Tokens
| Token | Light (Web) | Light (Kiosk) | Dark (Kiosk) |
|-------|-------------|---------------|--------------|
| Primary Background | #FFFFFF | #FEFCF7 | #1A1A1A |
| Secondary Background | #F8F8F8 | #F5F3EC | #3A3A3A |
| Primary Text | #2B2B2B | #2D3748 | #E8E8E8 |
| Secondary Text | #6B6B6B | #718096 | #A0AEC0 |
| Accent | #8B7355 | #D4AF74 | #D4AF74 |
| Primary Action | #2B2B2B | #1B365D | #2B4A7C |
| Border | #E5E5E5 | #E2E8F0 | #4A5568 |

### Typography Tokens
| Element | Web | Kiosk | Kiosk 55" |
|---------|-----|-------|-----------|
| Display | 2.5rem | 3.5rem | 4.375rem |
| H1 | 2rem | 2rem | 2.5rem |
| H2 | 1.5rem | 1.5rem | 1.875rem |
| Body | 1rem | 1rem | 1.25rem |
| Caption | 0.875rem | 0.875rem | 1.09375rem |

### Spacing Tokens
| Token | Value |
|-------|-------|
| xs | 4px |
| sm | 8px |
| md | 16px |
| lg | 24px |
| xl | 32px |
| 2xl | 48px |
| 3xl | 64px |

---

## Implementation Notes

### CSS Architecture
- **Web:** Single theme CSS file (`web-light-theme.css`)
- **CMS:** Backward-compatible CSS with variable mapping (`cms-styles.css`)
- **Kiosk:** Theme-aware CSS variables with `data-theme` selector (`styles.css`)

### File Dependencies

**All Kiosk Pages:**
- `styles.css` - Theme variables and base styles
- `theme-switcher.js` - Theme persistence logic

**K01 Screensaver:**
- Includes `theme-switcher.js` to respect saved theme from other pages
- NO theme toggle button (respects localStorage theme but doesn't allow changing)

**K03 Interactive Map:**
- Full theme support with toggle button
- Language toggle support

**K04 Studio Info Panel:**
- Full theme support with toggle button
- Language toggle support

**K06 Fullscreen Gallery:**
- Full theme support with toggle button
- Language toggle support
- Gallery state in localStorage

**K08 Timeout Modal:**
- Can be overlaid on any page
- Theme-aware styling

**Web Pages (W01-W09):**
- `web-light-theme.css` only
- No theme switching

**CMS Pages (W10-W12):**
- `cms-styles.css` only
- No theme switching

### Asset Loading
All pages use Google Fonts CDN:
```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=..." rel="stylesheet">
```

### Performance Considerations
- Minimize CSS specificity for faster rendering
- Use CSS variables for theme switching (no JavaScript DOM manipulation)
- Preload critical fonts
- Optimize images (use thumbnail → medium → full resolution pipeline)
- Lazy-load off-screen images

### Browser Support
- **Web:** Modern browsers (Chrome, Firefox, Safari, Edge - last 2 versions)
- **Kiosk:** Chromium-based browsers (via Electron)
- CSS Grid and Flexbox required
- CSS Custom Properties (variables) required

---

## Changelog

### Version 20251012-075605 (Current)
- Documented complete design system
- Finalized color palettes (removed all sepia/brown heritage colors)
- Established clean museum theme across all platforms
- Added comprehensive kiosk dual-theme system
- Documented all 16 pages (5 kiosk, 11 web/CMS)
- Specified typography, spacing, and component styles
- Added accessibility and responsive design guidelines

### Previous Iterations
- **20251010-163000:** Initial HTML mockups created
- **20251008-093219:** Original design specification (heritage theme)
- **Earlier:** Sepia/brown heritage color scheme (deprecated)

---

## Future Considerations

### Potential Enhancements
1. **Motion Preferences:** Respect `prefers-reduced-motion` media query
2. **High Contrast Mode:** Additional theme for visually impaired users
3. **Font Scaling:** Respect user browser font size preferences
4. **Color Blindness:** Ensure distinguishability beyond color alone
5. **Print Styles:** Optimize web pages for printing

### Phase 2 Additions
- Photo zoom functionality (pinch/scroll)
- Social sharing preview cards (Open Graph)
- Map layer visualization improvements
- Advanced filtering UI refinements
- CMS workflow status visualization

---

## Contact

For design questions or clarifications:
- **Project Documentation:** `docs/prds/`, `docs/architecture/`
- **Design Files:** `docs/designs/`
- **Design Specification:** This document

---

**End of Design Specification**
